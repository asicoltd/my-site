<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Unbeatable Tic Tac Toe</title>
<style>
body {
    font-family: Arial, sans-serif;
    background: #111;
    color: #fff;
    text-align: center;
    padding: 30px;
}

.container {
    display: flex;
    justify-content: center;
    flex-direction: column;
    align-items: center;
    gap: 20px;
    margin-top: 25px;
}

.board {
    display: grid;
    grid-template-columns: repeat(3, 100px);
    gap: 8px;
    justify-content: center;
    margin: 20px auto;
}

.cell {
    width: 100px;
    height: 100px;
    font-size: 36px;
    font-weight: bold;
    cursor: pointer;
    background: #222;
    border: 2px solid #444;
    color: #00ffcc;
    border-radius: 5px;
}

.cell:hover {
    border-color: #00ffcc;
    background: #2a2a2a;
}

.cell:disabled {
    cursor: not-allowed;
    opacity: 0.8;
}

button {
    margin: 10px;
    padding: 12px 24px;
    cursor: pointer;
    background: #222;
    color: #00ffcc;
    border: 2px solid #444;
    border-radius: 5px;
    font-size: 16px;
    font-weight: bold;
}

button:hover {
    border-color: #00ffcc;
    background: #2a2a2a;
}

#status {
    font-size: 20px;
    margin: 20px 0;
    min-height: 30px;
    color: #00ffcc;
}

#choice {
    margin: 20px 0;
}

#choice p {
    font-size: 18px;
    margin-bottom: 15px;
    color: #ccc;
}

h1 {
    color: #fff;
    margin-bottom: 10px;
}

p {
    color: #aaa;
}

/* Specific colors for X and O */
.cell.x {
    color: #ff6b6b; /* Red for X */
}

.cell.o {
    color: #4ecdc4; /* Cyan for O */
}
</style>
</head>
<body>

<h1>Unbeatable Tic Tac Toe</h1>
<p>Challenge the AI that never loses</p>

<div id="choice">
    <p>Choose your turn</p>
    <button onclick="startGame(true)">Play First (X)</button>
    <button onclick="startGame(false)">Play Second (O)</button>
</div>

<div class="board" id="board" style="display:none"></div>
<div id="status"></div>

<div class="container">
    <button onclick="resetGame()">Restart Game</button>
</div>

<script>
let board, human, ai, gameOver = false;

const boardDiv = document.getElementById("board");
const status = document.getElementById("status");

function startGame(playerFirst) {
    board = Array(9).fill("");
    gameOver = false;

    human = playerFirst ? "X" : "O";
    ai = playerFirst ? "O" : "X";

    document.getElementById("choice").style.display = "none";
    boardDiv.style.display = "grid";
    status.innerText = playerFirst ? "Your turn (X)" : "AI is thinking...";

    render();

    if (!playerFirst) {
        setTimeout(() => {
            const move = minimax(board, ai).index;
            board[move] = ai;
            render();
            status.innerText = "Your turn (X)";
        }, 100);
    }
}

function render() {
    boardDiv.innerHTML = "";
    board.forEach((cell, i) => {
        const btn = document.createElement("button");
        btn.className = "cell";
        if (cell === "X") btn.classList.add("x");
        if (cell === "O") btn.classList.add("o");
        btn.innerText = cell;
        btn.disabled = gameOver || cell !== "";
        btn.onclick = () => makeMove(i);
        boardDiv.appendChild(btn);
    });
}

function makeMove(i) {
    if (board[i] || gameOver) return;

    board[i] = human;
    render();
    status.innerText = "AI is thinking...";

    let result = checkWinner(board);
    if (result) return endGame(result);

    setTimeout(() => {
        const move = minimax(board, ai).index;
        board[move] = ai;
        render();

        result = checkWinner(board);
        if (result) {
            endGame(result);
        } else {
            status.innerText = "Your turn (" + human + ")";
        }
    }, 100);
}

function endGame(result) {
    gameOver = true;
    if (result === ai) {
        status.innerText = "âŒ AI wins. Trust Me you will never win.";
        status.style.color = "#ff6b6b";
    } else if (result === "tie") {
        status.innerText = "ðŸ¤ Draw. Play again if you think you can win.";
        status.style.color = "#ffd700";
    } else {
        status.innerText = "âœ… You win? Impossible! (Are you flash?)";
        status.style.color = "#4ecdc4";
    }
}

function resetGame() {
    document.getElementById("choice").style.display = "block";
    boardDiv.style.display = "none";
    status.innerText = "";
    status.style.color = "#00ffcc";
    gameOver = false;
}

function checkWinner(b) {
    const win = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
    ];
    for (let [a,b2,c] of win) {
        if (b[a] && b[a] === b[b2] && b[a] === b[c]) return b[a];
    }
    return b.every(x => x) ? "tie" : null;
}

function minimax(b, player) {
    const avail = b.map((v,i) => v === "" ? i : null).filter(v => v !== null);
    const winner = checkWinner(b);

    if (winner === human) return { score: -10 };
    if (winner === ai) return { score: 10 };
    if (winner === "tie") return { score: 0 };

    const moves = [];

    for (let i of avail) {
        const move = { index: i };
        b[i] = player;
        move.score = minimax(b, player === ai ? human : ai).score;
        b[i] = "";
        moves.push(move);
    }

    return player === ai
        ? moves.reduce((a,b) => a.score > b.score ? a : b)
        : moves.reduce((a,b) => a.score < b.score ? a : b);
}
</script>

</body>
</html>